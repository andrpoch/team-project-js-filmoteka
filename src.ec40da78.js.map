{"version":3,"sources":["js/services/apiTMDB.js","js/services/storage.js","js/services/pagination.js","js/services/modal.js","js/services/getGenresNames.js","js/services/index.js","js/genres.js","js/theme.js","js/templates/film_card.js","js/movies.js","js/searchFilms.js","js/templates/film-modal.js","js/my_library.js","js/film-modal.js","js/up-btn.js","js/app.js","index.js"],"names":["ApiTMDB","ENDPOINTS","TRENDING","endpoint","params","url","res","fetch","ok","json","Promise","reject","statusText","URLSearchParams","page","getData","query","SEARCH_MOVIES","append_to_response","GET_MOVIE","GENRES","then","genres","newPage","newQuery","id","newId","newEndpoint","NOW_PLAYING","TOP_RATED","UPCOMING","api_key","include_adult","Storage","constructor","key","data","window","localStorage","setItem","JSON","stringify","error","parse","getItem","removeItem","item","movies","updatedMovies","get","save","filter","movie","find","MOVIES","WATCHED","QUEUED","THEME","Pagination","totalPages","callback","e","target","dataset","btn","closest","PREV","goToPage","NEXT","PAGE","targetPage","getTargetPage","handleButtonsAndDots","createList","buttons","getButtonsRef","hideElement","showElement","refs","dots","at","prev","disabled","next","ref","classList","add","remove","pagination","index","findIndex","length","document","querySelectorAll","container","innerHTML","markup","firstPage","lastPage","i","createLinkMarkup","insertAdjacentHTML","num","querySelector","addEventListener","handlePaginationClick","textContent","newTotalPages","newCallback","Modal","name","openModal","closeBtn","closeModal","modal","onBackdropClick","onEscDown","body","removeEventListener","code","openBtn","openBtnSecond","onModalOpenBtnClick","getGenresNames","genresIds","genresStorage","genresNames","map","api","KEYS","moviesStorage","queuedStorage","watchedStorage","themeStorage","VIEWS","HOME","SEARCH","CURRENT","getGenres","console","root","button","light","dark","SCHEME","LIGHT","DARK","loadTheme","theme","setAttribute","getCurrentTheme","systemTheme","matchMedia","matches","savedTheme","handleClick","currentTheme","newTheme","getInitialTheme","handleTheme","movieListRef","makeMoviesMarkup","title","release_date","first_air_date","poster_path","genre_ids","vote_average","year","Date","getFullYear","poster2x","notFoundImgRetina","poster","notFoundImg","rating","String","padEnd","join","renderMarkup","gallery","categories","loader","defaultBtn","onChangeCategory","currentTarget","resetPage","toggleActiveBtn","activeBtn","replace","renderMovies","moreMovies","showPagination","log","message","results","total_pages","getCategory","scrollIntoView","submitForm","info","ERROR_MESSAGE","canScroll","handleSearch","searchMovies","handleError","handleSuccess","err","hidePagination","searchFilms","preventDefault","elements","search","value","trim","reset","makeOneMovieMarkup","dataMovie","vote_count","original_title","overview","popularity","watched","queued","videos","genre","posterBig","notFoundImgBig","posterBig2x","notFoundImgBigRetina","trailer","video","type","trailerKey","MARKER","QUEUE","PER_PAGE","logo","myLib","home","watchedBtn","queueBtn","libBtnsContainer","searchForm","header","onClickMyLibBtn","contains","changeLibClass","changeClassBtn","renderWatched","addMarker","marker","removeMarker","renderLibrary","preparePage","renderQueue","queue","Math","ceil","skip","slice","onClickMyHomeBtn","goBack","onClickMyWatchedBtn","onClickMyQueueBtn","className","toggle","myLibrary","onModalCard","BTNS","TRAILER","ADD","REMOVE","SHOW","HIDE","ON","OFF","backdropRef","modalRef","closeBtnRef","wrapperModalRef","trailerShown","clearModal","onModalOpenClick","event","cardRef","Number","checkMovie","getMovie","onModalButton","onBtnClick","deleteMovie","saveMovie","toggleBtnClass","changeBtnTextWatched","changeBtnTextQueue","trailerRef","scrollTo","top","behavior","setTimeout","changeBtnTextTrailer","addUpBtn","footer","BTN","UP","DOWN","CLASS","HIDDEN","observer","IntersectionObserver","handleObserve","threshold","createBtn","direction","createElement","sprite","renderBtns","upBtn","downBtn","appendChild","hideBtn","showBtn","entries","forEach","isIntersecting","observe","app"],"mappings":";;;AAuB0B,aAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,IAAA,EAAA,IAAA,KAAA,EAAA,OAAA,CAAA,IAAA,EAAA,SAAA,MAAA,IAAA,UAAA,4CAAA,EAAA,MAAA,GAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,SAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,IAAA,GAAA,MAAA,IAAA,UAAA,gBAAA,EAAA,kCAAA,OAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,QAAA,IAAA,EAAA,MAAA,IAAA,UAAA,gBAAA,EAAA,gDAAA,SAAA,EAAA,EAAA,GAAA,GAAA,IAAA,EAAA,MAAA,IAAA,UAAA,6CAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,MAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAZX,MAAMA,EAAQ,cAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAgBnB,MAAA,IAhBmB,EAAA,IAAA,KAAA,CAAA,UAAA,EAiBfA,MAAAA,EAAQC,UAAUC,WAjBH,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAqBjB,EAAA,KAAA,UAAA,MAAOC,EAAUC,EAAS,MAC5BC,MAAAA,KAAM,EAAGL,EAtBEA,EAsBgB,KAAEG,KAAYC,KAAnC,EAA6CJ,EAtBxCA,EAsB+D,KAC1EM,QAAYC,MAAMF,GACpBC,OAAAA,EAAIE,GACCF,EAAIG,OAENC,QAAQC,OAAOL,EAAIM,cAGd,EAAA,KAAA,cAAA,KACNR,MAAAA,EAAS,IAAIS,gBAAgB,CACjCC,KAAM,EAAA,KAAF,KAEC,OAAA,KAAKC,QAAQ,EAAA,KAAgBX,GAAAA,KAGvB,EAAA,KAAA,eAAA,KACPA,MAAAA,EAAS,IAAIS,gBAAgB,CACjCG,MAAO,EAAA,KAD0B,GAEjCF,KAAM,EAAA,KAAF,KAEC,OAAA,KAAKC,QAAQf,EAAQC,UAAUgB,cAAeb,KAG5C,EAAA,KAAA,WAAA,KACHA,MAAAA,EAAS,IAAIS,gBAAgB,CACjCK,mBAAoB,WAEhBf,KAAcH,EAAQC,UAAUkB,aAArB,EAAkC,KAAS,KACrD,OAAA,KAAKJ,QAAQZ,EAAUC,KAGpB,EAAA,KAAA,YAAA,KACJD,MAAAA,KAAcH,EAAQC,UAAUmB,SAC/B,OAAA,KAAKL,QAAQZ,GAAUkB,KAAKf,GAAOA,EAAIgB,UAGpC,EAAA,KAAA,YAAA,KACJnB,MAAAA,KAAcH,EAAQC,UAAUmB,SAC/B,OAAA,KAAKL,QAAQZ,GAAUkB,KAAKf,GAAOA,EAAIgB,UAGpC,EAAA,KAAA,YAAA,KACG,EAAA,KAAA,EAAA,KAEC,EAAA,KAAA,gBAAA,KACA,EAAA,KAAA,EAAA,EAAA,KAAA,GAAA,KAEZR,WACK,OAAA,EAAA,KAAP,GAEEA,SAAKS,GACMA,EAAAA,KAAAA,EAAAA,GAEXP,YACK,OAAA,EAAA,KAAP,GAEEA,UAAMQ,GACMA,EAAAA,KAAAA,EAAAA,GAEZC,SACK,OAAA,EAAA,KAAP,GAEEA,OAAGC,GACMA,EAAAA,KAAAA,EAAAA,GAGTvB,eACK,OAAA,EAAA,KAAP,GAEEA,aAASwB,GACMA,EAAAA,KAAAA,EAAAA,IAhFK,QAAA,QAAA,EAAA,IAAA,EAAA,CAAA,UAAA,EAXN,MAAA,oCAWM,EAAA,CAAA,UAAA,EAVL,MAAA,gCAFA3B,EAAAA,EAGA,YAAA,CACjBE,SAAU,sBACV0B,YAAa,qBACbC,UAAW,mBACXC,SAAU,kBACVb,cAAe,gBACfE,UAAW,SACXC,OAAQ,sBAEc,IAAA,EAAA,CAAA,UAAA,EAAA,MAAA,IAAIP,gBAAgB,CAC1CkB,QAAS/B,EAAAA,EAbQA,EAYyB,GAE1CgC,eAAe;;ACfH,aAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EADD,MAAMC,EAQnBC,YAAYC,GAGLC,EAAAA,KAAAA,OAAAA,IACD,IACFC,OAAOC,aAAaC,QAAQ,KAAKJ,IAAKK,KAAKC,UAAUL,IACrD,MAAOM,GACA,OAAA,QAGL,EAAA,KAAA,MAAA,KACA,IACKF,OAAAA,KAAKG,MAAMN,OAAOC,aAAaM,QAAQ,KAAKT,MACnD,MAAOO,GACA,OAAA,QAGF,EAAA,KAAA,SAAA,KACH,IACKJ,OAAAA,aAAaO,WAAW,KAAKV,KACpC,MAAOO,GACA,OAAA,QAGCI,EAAAA,KAAAA,YAAAA,IACJC,MACAC,EAAgB,CAACF,KADR,KAAKG,OAAS,IAExBC,KAAAA,KAAKF,KAEEvB,EAAAA,KAAAA,cAAAA,IACNsB,MAAAA,EAAS,KAAKE,MACdD,EAAgBD,MAAAA,OAAAA,EAAAA,EAAQI,OAAOC,GAASA,EAAM3B,KAAOA,GACtDyB,KAAAA,KAAKF,KAECvB,EAAAA,KAAAA,aAAAA,IACLsB,MAAAA,EAAS,KAAKE,MAEb,SADOF,MAAAA,OAAAA,EAAAA,EAAQM,KAAKD,GAASA,EAAM3B,KAAOA,MAnC5CU,KAAAA,IAAMA,GARC,QAAA,QAAA,EADKF,EAAAA,EACL,OAAA,CACZqB,OAAQ,mBACRC,QAAS,oBACTC,OAAQ,mBACRpC,OAAQ,mBACRqC,MAAO;;ACIO,aAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,QAAA,IAAA,EAAA,MAAA,IAAA,UAAA,gBAAA,EAAA,gDAAA,SAAA,EAAA,EAAA,GAAA,GAAA,IAAA,EAAA,MAAA,IAAA,UAAA,6CAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,MAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,IAAA,GAAA,MAAA,IAAA,UAAA,gBAAA,EAAA,kCAAA,OAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,IAAA,EAAA,IAAA,KAAA,EAAA,OAAA,CAAA,IAAA,EAAA,SAAA,MAAA,IAAA,UAAA,4CAAA,EAAA,MAAA,GAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QADH,MAAMC,EAWnBxB,aAAY,KAAEpB,EAAO,EAAT,WAAY6C,EAAa,EAAzB,SAA4BC,EAAW,WAAY,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,IAAA,KAAA,CAAA,UAAA,EAAA,WAAA,IAcvCC,EAAAA,KAAAA,wBAAAA,IAChBC,MAAAA,EAASD,EAAEC,OAAOC,QAAQC,IAAMH,EAAEC,OAASD,EAAEC,OAAOG,QAAQ,UAE1DD,OADIF,MAAAA,OAAAA,EAAAA,EAAQC,QAAQC,KAErB,KAAA,EAAAN,EA7BUA,EA6BV,GAAkBQ,KACjB,GAAe,IAAf,EAAe,KAAA,GAAG,OACjBC,KAAAA,SAAS,EAAa,KAAA,GAAA,GACZ,EAAA,KAAA,GAAA,KAAA,KAAA,EAAA,KAAf,IACA,MACG,KAAA,EAAAT,EAlCUA,EAkCV,GAAkBU,KACjB,GAAA,EAAe,KAAA,KAAA,EAAA,KAAnB,GAAqC,OAChCD,KAAAA,SAAS,EAAa,KAAA,GAAA,GACZ,EAAA,KAAA,GAAA,KAAA,KAAA,EAAA,KAAf,IACA,MACG,KAAA,EAAAT,EAvCUA,EAuCV,GAAkBW,KACfC,MAAAA,EAAa,KAAKC,cAAcV,EAAEC,QACpCQ,GAAAA,IAAe,EAAA,KAAnB,GAA+B,OAC1BH,KAAAA,SAASG,GACC,EAAA,KAAA,GAAA,KAAA,KAAA,EAAA,KAAf,IACA,MACF,QACE,UAGKA,EAAAA,KAAAA,WAAAA,IACLA,EAAa,GAAKA,EAAa,EAAA,KAAnC,GACeA,EAAAA,KAAAA,EAAAA,GAEA,EAAA,KAAA,EADJA,GAAc,EACV,EACK,EAAA,KAAb,IACe,EAAA,KAAA,EAAA,EAAa,KAAA,GAAA,EAAI,EAAI,EAAa,KAAA,GAAA,EAAI,GACvC,EAAA,KAAA,EAAA,EAAa,KAAA,GAAA,EAAI,EAAA,KAAmB,GAAA,EAAa,KAAA,GAAA,EAAI,EAAA,KAA1E,IACKE,KAAAA,uBACAC,KAAAA,eAEgB,EAAA,KAAA,uBAAA,KACfC,MAAAA,EAAU,IAAI,KAAKC,iBAErB,EAAuB,KAAA,IAAA,EACpBC,KAAAA,YAAYF,EAAQ,IAEpBG,KAAAA,YAAYH,EAAQ,IAGvB,EAAsB,KAAA,GAAA,EACnBE,KAAAA,YAAY,KAAKE,KAAKC,KAAK,IAE3BF,KAAAA,YAAY,KAAKC,KAAKC,KAAK,IAG9B,EAAsB,KAAA,IAAA,EAAA,KAA1B,GACOH,KAAAA,YAAYF,EAAQM,IAAI,IAExBH,KAAAA,YAAYH,EAAQM,IAAI,IAG3B,EAAqB,KAAA,GAAA,EAAmB,KAAA,GAAA,EACrCJ,KAAAA,YAAY,KAAKE,KAAKC,KAAK,IAE3BF,KAAAA,YAAY,KAAKC,KAAKC,KAAK,IAGf,IAAf,EAAe,KAAA,GACZD,KAAAA,KAAKG,KAAKC,UAAW,EAErBJ,KAAAA,KAAKG,KAAKC,UAAW,EAExB,EAAe,KAAA,KAAA,EAAA,KAAnB,GACOJ,KAAAA,KAAKK,KAAKD,UAAW,EAErBJ,KAAAA,KAAKK,KAAKD,UAAW,IAGhBE,EAAAA,KAAAA,cAAAA,IACZA,EAAIC,UAAUC,IAAI,eAENF,EAAAA,KAAAA,cAAAA,IACZA,EAAIC,UAAUE,OAAO,eAEN,EAAA,KAAA,iBAAA,KACVX,KAAAA,YAAY,KAAKE,KAAKU,cAEZ,EAAA,KAAA,iBAAA,KACVX,KAAAA,YAAY,KAAKC,KAAKU,cAEb1B,EAAAA,KAAAA,gBAAAA,IACRY,MAAAA,EAAU,IAAI,KAAKC,iBACnBc,EAAQf,EAAQgB,UAAU7B,GAAKA,IAAMC,GACvC2B,OAAU,IAAVA,EAAoB,EACpBA,IAAUf,EAAQiB,OAAS,EAAU,EAAA,KAAP,GAC3BF,EAAQ,EAAI,EAAA,KAAnB,KAEc,EAAA,KAAA,gBAAA,IACPG,SAASC,iBAAiB,sBAEtB,EAAA,KAAA,aAAA,KACNf,KAAAA,KAAKgB,UAAUC,UAAY,GAC5BC,IAAAA,EAAS,GACTC,EAAY,EAAsB,KAAA,GAAA,EAAI,EAAI,EAAA,KAA9C,GACIC,EAAW,EAAqB,KAAA,GAAA,EAAA,KAAmB,GAAA,EAAA,KAAmB,GAAA,EAAA,KAA1E,GACK,IAAA,IAAIC,EAAIF,EAAWE,GAAKD,EAAUC,GAAK,EAC1CH,GAAU,KAAKI,iBAAiBD,GAE7BrB,KAAAA,KAAKgB,UAAUO,mBAAmB,YAAaL,KAEnCM,EAAAA,KAAAA,mBAAAA,IAET,yCADOA,IAAQ,EAAA,KAAR,GAAqB,6BAA+B,uBACEA,aAxHhExB,KAAAA,KAAO,CACVG,KAAMW,SAASW,cAAc,qBAC7BpB,KAAMS,SAASW,cAAc,qBAC7Bf,WAAYI,SAASW,cAAc,eACnCT,UAAWF,SAASW,cAAc,0BAClCxB,KAAMa,SAASC,iBAAiB,UAE7Bf,KAAAA,KAAKU,WAAWgB,iBAAiB,QAAS,KAAKC,uBACjC9C,EAAAA,KAAAA,EAAAA,GACFC,EAAAA,KAAAA,EAAAA,GACZe,KAAAA,gBAAgB,GAAG+B,YAAc/C,EACjCQ,KAAAA,SAASrD,GA+GZA,WACK,OAAA,EAAA,KAAP,GAEEA,SAAKS,GACMA,EAAAA,KAAAA,EAAAA,GAEXoC,iBACK,OAAA,EAAA,KAAP,GAEEA,eAAWgD,GACMA,EAAAA,KAAAA,EAAAA,GAClB,IAAG,KAAKhC,iBAAiBK,IAAI,GAAG0B,YAAc,EAAA,KAA/C,GACKvC,KAAAA,SAAS,EAAA,KAAd,IAEEP,eACK,OAAA,EAAA,KAAP,GAEEA,aAASgD,GACMA,EAAAA,KAAAA,EAAAA,IAvJH,QAAA,QAAA,EAAA,IAAA,EAAA,CAAA,UAAA,EAAA,MAAA,CACd1C,KAAM,OACNE,KAAM,OACNC,KAAM;;ACdE,aAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAAZ,MAAMwC,EACJ3E,YAAY4E,GAAM,IAAA,EAUI,EAAA,KAAA,sBAAA,KACfC,KAAAA,YACAjC,KAAAA,KAAKkC,SAASR,iBAAiB,QAAS,KAAKS,YAC7CnC,KAAAA,KAAKoC,MAAMV,iBAAiB,QAAS,KAAKW,iBAC/CvB,SAASY,iBAAiB,UAAW,KAAKY,aAEhC,EAAA,KAAA,YAAA,KACLtC,KAAAA,KAAKoC,MAAM7B,UAAUE,OAAO,aACjCK,SAASyB,KAAKhC,UAAUC,IAAI,gBAEjB,EAAA,KAAA,aAAA,KACNR,KAAAA,KAAKoC,MAAM7B,UAAUC,IAAI,aAC9BM,SAASyB,KAAKhC,UAAUE,OAAO,cAC1BT,KAAAA,KAAKkC,SAASM,oBAAoB,QAAS,KAAKL,YAChDnC,KAAAA,KAAKoC,MAAMI,oBAAoB,QAAS,KAAKH,iBAClDvB,SAAS0B,oBAAoB,UAAW,KAAKF,aAE7BvD,EAAAA,KAAAA,kBAAAA,IACZA,EAAEC,SAAW,KAAKgB,KAAKoC,OACtBD,KAAAA,eAEKpD,EAAAA,KAAAA,YAAAA,IACK,WAAXA,EAAE0D,MACDN,KAAAA,eAhCAnC,KAAAA,KAAO,CACVoC,MAAOtB,SAASW,8BAA8BO,OAC9CU,QAAS5B,SAASW,mCAAmCO,OACrDW,cAAe7B,SAASW,mCAAmCO,cAC3DE,SAAUpB,SAASW,oCAAoCO,QAEpDhC,KAAAA,KAAK0C,QAAQhB,iBAAiB,QAAS,KAAKkB,qBACxBlB,QAApB1B,EAAAA,KAAAA,KAAK2C,qBAAejB,IAAAA,GAAAA,EAAAA,iBAAiB,QAAS,KAAKkB,sBAThD,QAAA,MAAA;;ACCX,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EATD,IAAA,EAAA,QAAA,eAEA,SAASC,EAAeC,GAChBtG,MAAAA,EAASuG,EAAc5E,cAAAA,MAKtB6E,OAJaF,EAAUG,IAAItG,IAC1B,MAAA,KAAEqF,GAASxF,EAAO+B,KAAKP,GAAQA,EAAKrB,KAAOA,GAC1CqF,OAAAA;;ACKX,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,OAAA,eAAA,QAAA,UAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,WAAA,OAAA,eAAA,QAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,SAAA,OAAA,eAAA,QAAA,iBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,kBAAA,QAAA,MAAA,QAAA,WAAA,QAAA,aAAA,QAAA,eAAA,QAAA,cAAA,QAAA,cAAA,QAAA,cAAA,QAAA,SAAA,EAXA,IAAA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,iBAeA,EAAA,QAAA,WACA,EAAA,QAAA,oBAPA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAPA,MAAMkB,EAAM,IAAIhI,EAAJ,QAOZ,QAAA,IAAA,EANA,MAAM6H,EAAgB,IAAI5F,EAAJ,QAAYA,EAAQgG,QAAAA,KAAK7G,QAM/C,QAAA,cAAA,EALA,MAAM8G,EAAgB,IAAIjG,EAAJ,QAAYA,EAAQgG,QAAAA,KAAK3E,QAK/C,QAAA,cAAA,EAJA,MAAM6E,EAAgB,IAAIlG,EAAJ,QAAYA,EAAQgG,QAAAA,KAAKzE,QAI/C,QAAA,cAAA,EAHA,MAAM4E,EAAiB,IAAInG,EAAJ,QAAYA,EAAQgG,QAAAA,KAAK1E,SAGhD,QAAA,eAAA,EAFA,MAAM8E,EAAe,IAAIpG,EAAJ,QAAYA,EAAQgG,QAAAA,KAAKxE,OAE9C,QAAA,aAAA,EADA,MAAM+B,EAAa,IAAI9B,EAAJ,QAAe,IAClC,QAAA,WAAA,EAAA,MAAM4E,EAAQ,CACZC,KAAM,OACNC,OAAQ,SACRC,QAAS,IAHX,QAAA,MAAA;;ACFenH,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EATf,IAAA,EAAA,QAAA,cACA,eAAeA,IACT,IACIA,MAAAA,QAAe0G,EAAIU,IAAAA,YACXxF,EAAAA,cAAAA,KAAK5B,GACnB,MAAOoB,GACPiG,QAAQjG,MAAMA,IAGHpB,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACsCd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EA/CD,IAAA,EAAA,QAAA,cACA,MAAMwD,EAAO,CACX8D,KAAMhD,SAASW,cAAc,SAC7BsC,OAAQjD,SAASW,cAAc,UAC/BuC,MAAOlD,SAASW,cAAc,wBAC9BwC,KAAMnD,SAASW,cAAc,wBAEzB9C,EAAQ,CACZuF,OAAQ,eACRC,MAAO,QACPC,KAAM,QAGR,SAASC,EAAUC,GACbA,IAAU3F,EAAMwF,OAClBnE,EAAKgE,MAAMzD,UAAUC,IAAI,UACzBR,EAAKiE,KAAK1D,UAAUE,OAAO,YAE3BT,EAAKiE,KAAK1D,UAAUC,IAAI,UACxBR,EAAKgE,MAAMzD,UAAUE,OAAO,WAE9BT,EAAK8D,KAAKS,aAAa5F,EAAMuF,OAAQI,GAGvC,SAASE,IACDC,MAAAA,EAAclH,OAAOmH,uBAAuB/F,EAAMuF,WAAWvF,EAAMwF,UAAUQ,QAC/EhG,EAAMwF,MACNxF,EAAMyF,KACJQ,EAAarB,EAAapF,aAAAA,MACzByG,OAAAA,GAA0BH,EAGnC,SAASI,IACDC,MACAC,EADeP,MACa7F,EAAMwF,MAAQxF,EAAMyF,KAAOzF,EAAMwF,MACtD/F,EAAAA,aAAAA,KAAK2G,GAClBV,EAAUU,GAGZ,SAASC,IAEPX,EADcG,KAID,SAASS,IACtBjF,EAAK+D,OAAOrC,iBAAiB,QAASmD,GACtCtH,OAAOmE,iBAAiB,mBAAoBsD;;;;;;ACW9C,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,kBAAA,EAzDA,IAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,0CACA,EAAA,EAAA,QAAA,6CAuDA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAtDA,MAAME,EAAepE,SAASW,cAAc,YAEtC0D,EAAmBlH,GACvBA,EACGgF,IACC,EACEmC,MAAAA,EACAC,aAAAA,EACAC,eAAAA,EACAC,YAAAA,EACA5I,GAAAA,EACA6I,UAAW1C,EACXtG,OAAAA,EACAiJ,aAAAA,MAEMzC,MAAAA,EAAcF,GAAY,EAAeA,EAAAA,gBAAAA,GAAatG,EAAOyG,IAAI,EAAGjB,KAAAA,KAAWA,GAC/E0D,EAAO,IAAIC,KAAKN,GAAgBC,GAAgBM,eAAiB,GACjEC,EAAWN,oCACqBA,IAClCO,EAFJ,QAGMC,EAASR,oCAAgDA,IAAgBS,EAA/E,QACIC,IAAAA,EAAS,MAIL,OAHJR,IACFQ,EAA0B,KAAjBR,EAAsB,OAASS,OAAOT,GAAcU,OAAO,EAAG,iDAG1CxJ,4EAI3BoJ,oBACAF,iFAIGE,oBACAX,sJAMmBA,qFAEFpC,EAAYoD,KAAK,OAAS,uBAAuBV,0CAC/CO,mEAO7BG,KAAK,IAEJC,EAAepI,IACbiD,MAAAA,EAASiE,EAAiBlH,GAChCiH,EAAa3D,mBAAmB,YAAaL,IAF/C,QAAA,aAAA;;ACkBejD,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA3Ef,IAAA,EAAA,QAAA,yBACA,EAAA,QAAA,cAEA,MAAM+B,EAAO,CACXsG,QAASxF,SAASW,cAAc,YAChC8E,WAAYzF,SAASW,cAAc,uBACnC+E,OAAQ1F,SAASW,cAAc,WAC/BgF,WAAY3F,SAASW,cAAc,+BAKrC,SAASiF,EAAiB3H,GACpBA,GAAAA,EAAEC,SAAWD,EAAE4H,cACjB,OAGI9J,MAAAA,EAAckC,EAAEC,OAAOC,QAAQ5D,SACjCH,EAAQC,QAAAA,UAAU0B,KAChBxB,EAAAA,IAAAA,SAAWH,EAAQC,QAAAA,UAAU0B,IAEnC+J,IACA3I,IACA4I,EAAgB9H,EAAEC,QAGpB,SAAS4H,IACHA,EAAAA,IAAAA,YACJ5G,EAAKsG,QAAQrF,UAAY,GAE3B,SAAS4F,EAAgB7H,GACjB8H,MAAAA,EAAY9G,EAAKuG,WAAW9E,cAAc,YAChDqF,MAAAA,GAAAA,EAAWvG,UAAUwG,QAAQ,UAAW,YACxC/H,EAAOuB,UAAUwG,QAAQ,WAAY,WAGvC,eAAe9I,EAAOjC,GACd2H,EAAAA,MAAAA,QAAUH,EAAMC,MAAAA,KAClBzH,IACEA,EAAAA,IAAAA,KAAOA,EACPX,EAAAA,IAAAA,SAAWH,EAAQC,QAAAA,UAAUC,SACjCyL,EAAgB7G,EAAKyG,aAEnB,IACI5H,MAAAA,QAAmBmI,IACdhL,EAAAA,WAAAA,KAAOkH,EAAIlH,IAAAA,KACX6C,EAAAA,WAAAA,WAAaA,EACbC,EAAAA,WAAAA,SAAWmI,EACXC,EAAAA,WAAAA,iBACX,MAAOtJ,GACPiG,QAAQsD,IAAIvJ,EAAMwJ,SAClBpH,EAAKwG,OAAOjG,UAAUC,IAAI,cAI9B,eAAewG,IACbhH,EAAKwG,OAAOjG,UAAUE,OAAO,aACvB,MAAA,QAAE4G,EAASC,YAAazI,SAAqBqE,EAAIqE,IAAAA,cAKhD1I,OAJPmB,EAAKsG,QAAQrF,UAAY,IACzBjB,EAAKuG,WAAWhG,UAAUE,OAAO,cACpB4G,EAAAA,EAAAA,cAAAA,GACbrH,EAAKwG,OAAOjG,UAAUC,IAAI,aACnB3B,EAGT,eAAeoI,EAAWjL,GACpB,IACEA,EAAAA,IAAAA,KAAOA,QACLgL,IACNhH,EAAKsG,QAAQkB,iBACb,MAAO5J,GACPiG,QAAQsD,IAAIvJ,IA7DhBoC,EAAKuG,WAAW7E,iBAAiB,QAASgF,GAiE3BzI,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACTf,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,kBAAA,EAlEA,IAAA,EAAA,QAAA,yBACA,EAAA,QAAA,cAEA,MAAMwJ,EAAa3G,SAASW,cAAc,iBACpCiG,EAAO5G,SAASW,cAAc,iBAC9B6E,EAAUxF,SAASW,cAAc,YACjC8E,EAAazF,SAASW,cAAc,uBACpC+E,EAAS1F,SAASW,cAAc,WAChCkG,EAAgB,0DACtB,IAAIC,GAAY,EAEhB,MAAMC,EAAe,MAAA,IACblE,EAAAA,MAAAA,QAAUH,EAAME,MAAAA,OAClB1H,EACEA,EAAAA,IAAAA,KAAOA,EAEX4L,GAAY,EAEdpB,EAAOjG,UAAUE,OAAO,aACxB8F,EAAWhG,UAAUC,IAAI,aACrB,IACIlD,MAAAA,QAAa4F,EAAI4E,IAAAA,eACnB,IAACxK,EAAK+J,QAAQxG,OAEhB,YADAkH,IAGFC,EAAc1K,GACVsK,GAAWtB,EAAQkB,iBACvB,MAAO5J,GACPmK,EAAYnK,KAqChB,QAAA,aAAA,EAjCA,MAAMoK,EAAgB,EAAGX,QAAAA,EAASC,YAAazI,MAC7C6I,EAAKzG,UAAY,GACjBqF,EAAQrF,UAAY,IACPoG,EAAAA,EAAAA,cAAAA,GACCjJ,EAAAA,cAAAA,KAAKiJ,GACRvI,EAAAA,WAAAA,SAAW+I,EACX7L,EAAAA,WAAAA,KAAOkH,EAAIlH,IAAAA,KACX6C,EAAAA,WAAAA,WAAaA,EACxB2H,EAAOjG,UAAUC,IAAI,aACV0G,EAAAA,WAAAA,kBAEPa,EAAcE,IAClB3B,EAAQrF,UAAY,GACTiH,EAAAA,WAAAA,iBACX1B,EAAOjG,UAAUC,IAAI,aACrBkH,EAAKzG,UAAY0G,EACXhE,EAAAA,MAAAA,QAAUH,EAAMC,MAAAA,KAClBwE,GACFpE,QAAQjG,MAAMqK,IAGZE,EAAc,MAAA,IAClBpJ,EAAEqJ,iBACFR,GAAY,EACN1L,MAAAA,EAAQ6C,EAAEC,OAAOqJ,SAASC,OAAOC,MAAMC,OACxCtM,IAGDA,EAAAA,IAAAA,MAAQA,QACN2L,EAAa,GACnBD,GAAY,EACZ7I,EAAEC,OAAOyJ,UAELH,EAAS,KACbb,EAAW/F,iBAAiB,SAAUyG,IADxC,QAAA,OAAA;;;;;;ACmDC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EApHD,IAAA,EAAA,EAAA,QAAA,0CACA,EAAA,EAAA,QAAA,0CACA,EAAA,EAAA,QAAA,6CACA,EAAA,EAAA,QAAA,6CAiHC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA/Gc,SAASO,EAAmBC,GAAW,IAAA,EAC9C,MAAA,MACJvD,EADI,YAEJG,EAFI,OAGJ/I,EAHI,aAIJiJ,EAJI,WAKJmD,EALI,eAMJC,EANI,SAOJC,EAPI,WAQJC,EARI,QASJC,EATI,OAUJC,EAVI,OAWJC,GACEP,EACE3F,EAAcxG,EAAOyG,IAAIkG,GAASA,EAAMnH,MAAMoE,KAAK,MACnDL,EAASR,oCAAgDA,IAAgBS,EAA/E,QACMH,EAAWN,oCACqBA,IAClCO,EAFJ,QAGMsD,EAAY7D,oCAAgDA,IAAgB8D,EAAlF,QACMC,EAAc/D,oCACkBA,IAClCgE,EAFJ,QAGIC,IAAAA,EAAUN,EAAO7B,QAAQ9I,KAC3BkL,GAAgC,OAAvBA,EAAK,WAAyC,YAAfA,EAAMC,MAG1CC,MAAAA,EAAa,QAAAH,EADnBA,EAAUA,GAAoBN,EAAO7B,QAAQ,UAC1B,IAAA,OAAA,EAAA,EAAShK,IACxB4I,IAAAA,EAAS,MAIL,OAHJR,IACFQ,EAA0B,KAAjBR,EAAsB,OAASS,OAAOT,GAAcU,OAAO,EAAG,+KAOrDJ,8BACAF,yKAMAuD,8BACAE,8IAI0BlE,WAAeW,+IAIdX,wOAKuBa,sDAA2D2C,qKAIxFG,2GAGA3D,EAAQ,GAAK,mEACbA,GAAgByD,gKAIhB7F,GAA4B,gNAM9B8F,mJAGqBE,EAAU,iBAAmB,iCAErEA,EAAU,cAAgB,0FAEcC,EAAS,iBAAmB,+BACpEA,EAAS,cAAgB,gDAGzBU,EACK,8FACD,2DAMpBA,oKAMqCA,oBAC5BH,EAAQE,wLAMb;;AC+CT,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAAA,QAAA,cAAA,EAAA,QAAA,YAAA,EAAA,QAAA,YAAA,EAjKD,IAAA,EAAA,QAAA,cACA,EAAA,QAAA,yBACA,EAAA,EAAA,QAAA,aACA,EAAA,QAAA,iBA8JC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA5JD,MAAME,EAAS,CACbnL,QAAS,UACToL,MAAO,SA0JR,QAAA,OAAA,EAxJD,MAAMC,EAAW,GACjB,IAAI9N,EAAO,EACP4L,GAAY,EAChB,MAAM5H,EAAO,CACX+J,KAAMjJ,SAASW,cAAc,sBAC7BuI,MAAOlJ,SAASW,cAAc,0BAC9BwI,KAAMnJ,SAASW,cAAc,qBAC7ByI,WAAYpJ,SAASW,cAAc,wBACnC0I,SAAUrJ,SAASW,cAAc,sBACjC2I,iBAAkBtJ,SAASW,cAAc,+BACzC4I,WAAYvJ,SAASW,cAAc,iBACnCiG,KAAM5G,SAASW,cAAc,iBAC7B6E,QAASxF,SAASW,cAAc,YAChC8E,WAAYzF,SAASW,cAAc,uBACnC6I,OAAQxJ,SAASW,cAAc,YAGjC,SAAS8I,IACHvK,EAAKgK,MAAMzJ,UAAUiK,SAAS,aAGlCC,EAAe,WACfC,EAAe,UAAW,YAC1B1K,EAAKoK,iBAAiB7J,UAAUE,OAAO,aACvCT,EAAKqK,WAAW9J,UAAUC,IAAI,aAC9BR,EAAKsK,OAAO/J,UAAUC,IAAI,SAC1BxE,EAAO,EACPgE,EAAKuG,WAAWhG,UAAUC,IAAI,aAC9BoH,GAAY,EACZ+C,IACA/C,GAAY,GAGd,SAASgD,EAAUC,GACjB7K,EAAKsG,QAAQ/F,UAAUC,IAAIqK,GAE7B,SAASC,EAAaD,GACpB7K,EAAKsG,QAAQ/F,UAAUE,OAAOoK,GAGhC,SAASF,EAAclO,GACrBuD,EAAKsG,QAAQrF,UAAY,GACnB+H,MAAAA,EAAU1F,EAAenF,eAAAA,OAAS,GACxC2M,EAAalB,EAAOC,OACpBe,EAAUhB,EAAOnL,SACNK,EAAAA,WAAAA,SAAW6L,EAEtBI,EADoBC,EAAYhC,EAASvM,IAI3C,SAASwO,EAAYxO,EAAU,GAC7BuD,EAAKsG,QAAQrF,UAAY,GACnBiK,MAAAA,EAAQ7H,EAAclF,cAAAA,OAAS,GACrC2M,EAAalB,EAAOnL,SACpBmM,EAAUhB,EAAOC,OACN/K,EAAAA,WAAAA,SAAWmM,EAEtBF,EADkBC,EAAYE,EAAOzO,IAIvC,SAASuO,EAAY1N,EAAMb,GACzBT,EAAOS,GAAoBT,EACrB6C,MAAAA,EAAasM,KAAKC,KAAK9N,EAAKuD,OAASiJ,GAC3C9N,EAAOA,EAAO6C,EAAaA,EAAa7C,EAC7BA,EAAAA,WAAAA,KAAOA,EACP6C,EAAAA,WAAAA,WAAaA,EAClBwM,MAAAA,GAAQrP,EAAO,GAAK8N,EACnBxM,OAAAA,EAAKgO,MAAMD,EAAMvB,EAAW9N,GAGrC,SAAS+O,EAAc9M,GACjB,IAACA,GAA4B,IAAlBA,EAAO4C,OAGpB,OAFAb,EAAK0H,KAAKzG,UAAY,uCACXiH,EAAAA,WAAAA,iBAGblI,EAAK0H,KAAKzG,UAAY,IACThD,EAAAA,EAAAA,cAAAA,GACFiJ,EAAAA,WAAAA,iBACPU,GACF5H,EAAKsG,QAAQkB,iBAIjB,SAAS+D,EAAiBxM,GAClBC,MAAAA,EAASD,EAAE4H,cACb3H,EAAOuB,UAAUiK,SAAS,aAG9BM,EAAalB,EAAOnL,SACpBqM,EAAalB,EAAOC,OACf7J,EAAKiK,KAAK1J,UAAUiK,SAAS,YAAYC,EAAe,WAC7DzK,EAAKoK,iBAAiB7J,UAAUC,IAAI,aACpCR,EAAKqK,WAAW9J,UAAUE,OAAO,aACjCT,EAAKqK,WAAWhC,SAASC,OAAOC,MAAQ,GACxCvI,EAAKsK,OAAO/J,UAAUE,OAAO,SAC7BT,EAAK0H,KAAKzG,UAAY,GACtBjB,EAAKuG,WAAWhG,UAAUE,OAAO,aAC7BzB,IAAWgB,EAAKiK,MAIb,EAAA,EAAA,SAAA,GAHLuB,KAMJ,SAASA,IACChI,OAAAA,EAAMG,MAAAA,SACPH,KAAAA,EAAMC,MAAAA,KAET,YADA,EAAA,EAAA,WAEGD,KAAAA,EAAME,MAAAA,OAET,YADA,EAAA,EAAA,gBAEF,QACE,QAIN,SAAS+H,IACPf,EAAe,UAAW,YAC1B1O,EAAO,EACP4L,GAAY,EACZ+C,IACA/C,GAAY,EAGd,SAAS8D,IACPhB,EAAe,WAAY,WAC3B1O,EAAO,EACP4L,GAAY,EACZqD,IACArD,GAAY,EAGd,SAAS8C,EAAelK,EAAKC,GAC3BT,EAAKkK,WAAW3J,UAAUC,IAAIA,GAC9BR,EAAKkK,WAAW3J,UAAUE,OAAOA,GACjCT,EAAKmK,SAAS5J,UAAUC,IAAIC,GAC5BT,EAAKmK,SAAS5J,UAAUE,OAAOD,GAGjC,SAASiK,EAAekB,GACtB3L,EAAKgK,MAAMzJ,UAAUqL,OAAOD,GAC5B3L,EAAKiK,KAAK1J,UAAUqL,OAAOD,GAG7B,SAASE,IACP7L,EAAK+J,KAAKrI,iBAAiB,QAAS6J,GACpCvL,EAAKgK,MAAMtI,iBAAiB,QAAS6I,GACrCvK,EAAKiK,KAAKvI,iBAAiB,QAAS6J,GACpCvL,EAAKkK,WAAWxI,iBAAiB,QAAS+J,GAC1CzL,EAAKmK,SAASzI,iBAAiB,QAASgK;;ACoB3BI,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EApLf,IAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,2BACA,EAAA,QAAA,gBAkLeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAhLf,MAAMC,EAAO,CACXlC,MAAO,QACPpL,QAAS,UACTuN,QAAS,UACTC,IAAK,SACLC,OAAQ,cACRC,KAAM,OACNC,KAAM,OACNC,GAAI,UACJC,IAAK,kBAGDC,EAAczL,SAASW,cAAe,4BAEtC+K,EAAW1L,SAASW,cAAe,UAEnCyD,EAAepE,SAASW,cAAc,YAEtCgL,EAAc3L,SAASW,cAAe,kCACtCiL,EAAkB5L,SAASW,cAAc,kBACzC+E,EAAS1F,SAASW,cAAc,WAGtC,IAAIkH,EAAY,GACZK,GAAU,EACVC,GAAS,EACT0D,GAAe,EAInB,SAASC,IACPF,EAAgBzL,UAAY,GAI9B,MAAM8G,EAAcnK,IAClB4I,EAAOjG,UAAUC,IAAI,aACrBqD,QAAQsD,IAAIvJ,EAAMwJ,UAIpB,eAAeyF,EAAiBC,GACxBC,MAAAA,EAAUD,EAAM9N,OAAOG,QAAQ,cACjC2N,GAAAA,EAAM9N,SAAW8N,EAAMnG,gBAAkBoG,EAC3C,OAEIpQ,MAAAA,EAAKqQ,OAAOD,EAAQ9N,QAAQtC,IAClC6J,EAAOjG,UAAUE,OAAO,aACxBuI,EAAU1F,EAAe2J,eAAAA,WAAWtQ,GACpCsM,EAAS5F,EAAc4J,cAAAA,WAAWtQ,GAC9BA,EAAAA,IAAAA,GAAKA,EACL,IACFgM,QAAkBzF,EAAIgK,IAAAA,WAEtBR,EAAgBnL,mBACd,aACA,EAAmB,EAAA,SAAA,IAAKoH,EAAWK,QAAAA,EAASC,OAAAA,KAG9ChH,IACAuE,EAAOjG,UAAUC,IAAI,aACrBiM,EAAY/K,iBAAiB,QAASS,GACtCoK,EAAY7K,iBAAiB,QAASW,GACtCvB,SAASY,iBAAiB,UAAWY,GACrCoK,EAAgBjL,cAAc,uBAAuBC,iBAAiB,QAASyL,GAC/E,MAAOvP,GACPmK,EAAYnK,IAIhB,SAASqE,IACPsK,EAAYhM,UAAUE,OAAO,aAC7BK,SAASyB,KAAKhC,UAAUC,IAAI,cAG9B,SAAS2B,IACPoK,EAAYhM,UAAUC,IAAI,aAC1BM,SAASyB,KAAKhC,UAAUE,OAAO,cAC/BgM,EAAYjK,oBAAoB,QAAS4K,GACzCb,EAAY/J,oBAAoB,QAASH,GACzCvB,SAAS0B,oBAAoB,UAAWF,GACxCoK,EAAgBjL,cAAc,uBAAuBe,oBAAoB,QAAS2K,GAClFP,IAEF,SAASvK,EAAgBtD,GACnBA,EAAEC,SAAWuN,GACjBpK,IAEF,SAASG,EAAUvD,GACF,WAAXA,EAAE0D,MACNN,IAEF,SAASiL,EAAWrO,GACdA,EAAE0D,OAASgK,GACftK,IAEF,SAASgL,GAAc,OAAEnO,IACjBE,MAAAA,EAAMF,EAAOC,QAAQC,IACvB,GAACA,EACGA,OAAAA,GACD6M,KAAAA,EAAKtN,QAYR,OAXIuK,EACaqE,EAAAA,eAAAA,YAAY1E,EAAUhM,IAEtB2Q,EAAAA,eAAAA,UAAU3E,GAE3BK,GAAWA,EACXuE,EAAevO,GACfwO,EAAqBxO,QACjBkG,EAAa3E,UAAUiK,SAASZ,EAAOnL,OAAAA,WACzC,EAAA,EAAA,kBAGCsN,KAAAA,EAAKlC,MAYR,OAXIZ,EACYoE,EAAAA,cAAAA,YAAY1E,EAAUhM,IAEtB2Q,EAAAA,cAAAA,UAAU3E,GAE1BM,GAAUA,EACVsE,EAAevO,GACfyO,EAAmBzO,QACfkG,EAAa3E,UAAUiK,SAASZ,EAAOC,OAAAA,SACzC,EAAA,EAAA,gBAGCkC,KAAAA,EAAKC,QACF0B,MAAAA,EAAa5M,SAASW,cAAc,YAqB1C,OApBIkL,GACFH,EAASmB,SAAS,CAChBC,IAAK,EACLC,SAAU,WAEZC,WAAW,IAAMJ,EAAWnN,UAAUC,IAAI,aAAc,OAExDkN,EAAWnN,UAAUE,OAAO,aAC5BqN,WACE,IACEtB,EAASmB,SAAS,CAChBC,IAAK,IACLC,SAAU,WAEd,MAGJlB,GAAgBA,EAChBY,EAAevO,QACf+O,EAAqB/O,GAEvB,QACE,QAIN,SAASwO,EAAqBtO,GAC5BA,EAAI0C,eAAiBoH,EAAU+C,EAAKG,OAASH,EAAKE,OAAOF,EAAKtN,UAGhE,SAASgP,EAAmBvO,GAC1BA,EAAI0C,eAAiBqH,EAAS8C,EAAKG,OAASH,EAAKE,OAAOF,EAAKlC,QAG/D,SAASkE,EAAqB7O,GAC5BA,EAAI0C,eAAiB+K,EAAeZ,EAAKK,KAAOL,EAAKI,QAAQJ,EAAKC,UAGpE,SAASF,IAEP5G,EAAaxD,iBAAiB,QAASmL,GAGzC,SAASU,EAAerO,GACxBA,EAAIqB,UAAUqL,OAAOG,EAAKM,IAC1BnN,EAAIqB,UAAUqL,OAAOG,EAAKO,KAGXR,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;;;AC7FAkC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAvFf,IAAA,EAAA,EAAA,QAAA,yBAuFeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GArFf,MAAMhO,EAAO,CACXsK,OAAQxJ,SAASW,cAAc,WAC/BwM,OAAQnN,SAASW,cAAc,YAG3ByM,EAAM,CACVC,GAAI,KACJC,KAAM,OACNC,MAAO,SACPC,OAAQ,aAGJC,EAAW,IAAIC,qBAAqBC,EAAe,CAAEC,UAAW,IAEtE,SAASC,EAAUC,GACX1P,MAAAA,EAAM4B,SAAS+N,cAAc,UAC7BvR,EAAOsR,IAAcV,EAAIC,GAAKD,EAAIC,GAAKD,EAAIE,KAS1ClP,OARPA,EAAIqF,aAAa,iBAAkBjH,GACnC4B,EAAIqF,aAAa,4BAA6BqK,KAC9C1P,EAAIqB,UAAUC,OAAO0N,EAAIG,aAAcH,EAAII,QAC3CpP,EAAI+B,+BACYiN,EAAIG,yDACHS,EAAO,uBAAeF,4BAGhC1P,EAGT,SAAS6P,IACP/O,EAAKgP,MAAQL,EAAUT,EAAIC,IAC3BnO,EAAKiP,QAAUN,EAAUT,EAAIE,MACvBpN,MAAAA,EAAYF,SAAS+N,cAAc,OACzC7N,EAAUT,UAAUC,IAAI0N,EAAIG,OAC5BrN,EAAUkO,YAAYlP,EAAKgP,OAC3BhO,EAAUkO,YAAYlP,EAAKiP,SAC3BnO,SAASW,cAAc,QAAQyN,YAAYlO,GAC3CA,EAAUU,iBAAiB,QAASmD,GAGtC,SAASA,EAAY9F,GACbC,MAAAA,EAASD,EAAEC,OAAOC,QAAQ2P,UAAY7P,EAAEC,OAASD,EAAEC,OAAOG,QAAQ,UAEhEyP,OADU5P,MAAAA,OAAAA,EAAAA,EAAQC,QAAQ2P,WAE3BV,KAAAA,EAAIC,GAEP,YADAnO,EAAKsK,OAAO9C,iBAET0G,KAAAA,EAAIE,KAEP,YADApO,EAAKiO,OAAOzG,iBAEd,QACE,QAIN,SAAS2H,EAAQnQ,GACXA,IAAWgB,EAAKsK,OAClBtK,EAAKgP,MAAMzO,UAAUC,IAAI0N,EAAII,QAE7BtO,EAAKiP,QAAQ1O,UAAUC,IAAI0N,EAAII,QAGnC,SAASc,EAAQpQ,GACXA,IAAWgB,EAAKsK,OAClBtK,EAAKgP,MAAMzO,UAAUE,OAAOyN,EAAII,QAEhCtO,EAAKiP,QAAQ1O,UAAUE,OAAOyN,EAAII,QAItC,SAASG,EAAcY,GACrBA,EAAQC,QAAQ,EAAGC,eAAAA,EAAgBvQ,OAAAA,MAC7BuQ,EACFJ,EAAQnQ,GAERoQ,EAAQpQ,KAKd,SAASgP,IACPe,IACAR,EAASiB,QAAQxP,EAAKsK,QACtBiE,EAASiB,QAAQxP,EAAKiO,QAGTD,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACrEd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAlBD,IAAA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,aACA,EAAA,QAAA,iBACA,EAAA,EAAA,QAAA,iBACA,EAAA,QAAA,gBACA,EAAA,EAAA,QAAA,aACA,EAAA,QAAA,oBAWC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GATc,eAAeyB,KAC5B,EAAA,EAAA,iBACM,EAAN,EAAA,iBACM,EAAN,EAAA,YACA,EAAA,EAAA,WACA,EAAA,EAAA,YACA,EAAA,EAAA,cACA,EAAA,EAAA,WACI1N,IAAAA,EAAJ,MAAU;;ACfZ,aAFA,QAAA,oBACA,IAAA,EAAA,EAAA,QAAA,aACA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,IAAA,EAAA,EAAA","file":"src.ec40da78.js","sourceRoot":"../src","sourcesContent":["/**\n * по умолчанию страница 1\n * есть геттер и сеттер для page\n * метод .incrementPage увеличивает страницу на 1\n * метод .resetPage устанавливет страницу в 1\n * запрос трендов - метод .getTrending()\n * поиск фильмов по query(строка) - метод .searchMovies()\n *  перед использовнием метода установить query на своем экземпляре класса\n * поиск фильма по id(число) - метод .getMovie()\n *  перед использовнием метода установить id на своем экземпляре класса\n */\nexport default class ApiTMDB {\n  static #API_KEY = 'fadfbb72581e18342bb7490adda20bdd';\n  static #BASE_URL = 'https://api.themoviedb.org/3';\n  static ENDPOINTS = {\n    TRENDING: '/trending/movie/day',\n    NOW_PLAYING: '/movie/now_playing',\n    TOP_RATED: '/movie/top_rated',\n    UPCOMING: '/movie/upcoming',\n    SEARCH_MOVIES: '/search/movie',\n    GET_MOVIE: '/movie',\n    GENRES: '/genre/movie/list',\n  };\n  static #COMMON_PARAMS = new URLSearchParams({\n    api_key: ApiTMDB.#API_KEY,\n    include_adult: false,\n  });\n  #page = 1;\n  #endpoint = ApiTMDB.ENDPOINTS.TRENDING;\n  #query;\n  #id;\n\n  getData = async (endpoint, params = '') => {\n    const url = `${ApiTMDB.#BASE_URL}${endpoint}?${params}&${ApiTMDB.#COMMON_PARAMS}`;\n    const res = await fetch(url);\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res.statusText);\n  };\n\n  getCategory = () => {\n    const params = new URLSearchParams({\n      page: this.#page,\n    });\n    return this.getData(this.#endpoint, params);\n  };\n\n  searchMovies = () => {\n    const params = new URLSearchParams({\n      query: this.#query,\n      page: this.#page,\n    });\n    return this.getData(ApiTMDB.ENDPOINTS.SEARCH_MOVIES, params);\n  };\n\n  getMovie = () => {\n    const params = new URLSearchParams({\n      append_to_response: 'videos',\n    });\n    const endpoint = `${ApiTMDB.ENDPOINTS.GET_MOVIE}/${this.#id}`;\n    return this.getData(endpoint, params);\n  };\n\n  getGenres = () => {\n    const endpoint = `${ApiTMDB.ENDPOINTS.GENRES}`;\n    return this.getData(endpoint).then(res => res.genres);\n  };\n\n  getGenres = () => {\n    const endpoint = `${ApiTMDB.ENDPOINTS.GENRES}`;\n    return this.getData(endpoint).then(res => res.genres);\n  };\n\n  resetPage = () => {\n    this.#page = 1;\n  };\n  incrementPage = () => {\n    this.#page += 1;\n  };\n  get page() {\n    return this.#page;\n  }\n  set page(newPage) {\n    this.#page = newPage;\n  }\n  get query() {\n    return this.#query;\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n  get id() {\n    return this.#id;\n  }\n  set id(newId) {\n    this.#id = newId;\n  }\n\n  get endpoint() {\n    return this.#endpoint;\n  }\n  set endpoint(newEndpoint) {\n    this.#endpoint = newEndpoint;\n  }\n}\n","/** Ожидает при создании экземпляра строку с ключом локального хранилища.\n ** В статическом свойстве Storage.KEYS хранятся возможные ключи.\n ** .save(data) - сохранить данные в хранилище\n ** .get() - считать данные из хранилища\n ** .remove() - удалить запись из хранилища\n ** .saveMovie(movie) - сохранить один фильм (добавить в масиив)\n ** .deleteMovie(id) - удалить один фильм, по id (удалить из массива)\n ** .checkMovie(id) - проверить, есть ли фильм в хранилище, по id\n */\nexport default class Storage {\n  static KEYS = {\n    MOVIES: 'filmoteka/movies',\n    WATCHED: 'filmoteka/watched',\n    QUEUED: 'filmoteka/queued',\n    GENRES: 'filmoteka/genres',\n    THEME: 'filmoteka/theme',\n  };\n  constructor(key) {\n    this.key = key;\n  }\n  save = data => {\n    try {\n      window.localStorage.setItem(this.key, JSON.stringify(data));\n    } catch (error) {\n      return null;\n    }\n  };\n  get = () => {\n    try {\n      return JSON.parse(window.localStorage.getItem(this.key));\n    } catch (error) {\n      return null;\n    }\n  };\n  remove = () => {\n    try {\n      return localStorage.removeItem(this.key);\n    } catch (error) {\n      return null;\n    }\n  };\n  saveMovie = item => {\n    const movies = this.get() || [];\n    const updatedMovies = [item, ...movies];\n    this.save(updatedMovies);\n  };\n  deleteMovie = id => {\n    const movies = this.get();\n    const updatedMovies = movies?.filter(movie => movie.id !== id);\n    this.save(updatedMovies);\n  };\n  checkMovie = id => {\n    const movies = this.get();\n    const movie = movies?.find(movie => movie.id === id);\n    return !!movie;\n  };\n}\n","/**\n * Ожидает при вызове объект параметров:\n * 1. callback: callback-функция, которая будет вызвана при клике\n * на кнопку пагинации, в эту функцию будет передана новая страница.\n * 2. page: текущая страница, по умолчанию 1.\n * 3. totalPages: общее количество страниц, по умолчанию 1.\n * * Сеттеры и геттеры для pages и totalPages\n * * методы .hidePagination() и .showPagination()\n * * Пример создания экземпляра класса:\n * @example\n *  const pagination = new Pagination({\n *   page: 10,\n *   totalPages: 19,\n *   callback: page => {\n *     console.log(`Запрос на бекенд по странице № ${page} и рендер галлереи`);\n *   },\n * });\n */\nexport default class Pagination {\n  static #TYPES = {\n    PREV: 'prev',\n    NEXT: 'next',\n    PAGE: 'page',\n  };\n  #page;\n  #totalPages;\n  #callback;\n  #listFirstPage;\n  #listLastPage;\n  constructor({ page = 1, totalPages = 1, callback = () => {} }) {\n    this.refs = {\n      prev: document.querySelector('[data-btn=\"prev\"]'),\n      next: document.querySelector('[data-btn=\"next\"]'),\n      pagination: document.querySelector('.pagination'),\n      container: document.querySelector('.pagination__container'),\n      dots: document.querySelectorAll('.dots'),\n    };\n    this.refs.pagination.addEventListener('click', this.handlePaginationClick);\n    this.#totalPages = totalPages;\n    this.#callback = callback;\n    this.getButtonsRef()[1].textContent = totalPages;\n    this.goToPage(page);\n  }\n  handlePaginationClick = e => {\n    const target = e.target.dataset.btn ? e.target : e.target.closest('BUTTON');\n    const btn = target?.dataset.btn;\n    switch (btn) {\n      case Pagination.#TYPES.PREV:\n        if (this.#page === 1) return;\n        this.goToPage(this.#page - 1);\n        this.#callback(this.#page);\n        break;\n      case Pagination.#TYPES.NEXT:\n        if (this.#page === this.#totalPages) return;\n        this.goToPage(this.#page + 1);\n        this.#callback(this.#page);\n        break;\n      case Pagination.#TYPES.PAGE:\n        const targetPage = this.getTargetPage(e.target);\n        if (targetPage === this.#page) return;\n        this.goToPage(targetPage);\n        this.#callback(this.#page);\n        break;\n      default:\n        return;\n    }\n  };\n  goToPage = targetPage => {\n    if (targetPage > 1 && targetPage < this.#totalPages) {\n      this.#page = targetPage;\n    } else if (targetPage <= 1) {\n      this.#page = 1;\n    } else this.#page = this.#totalPages;\n    this.#listFirstPage = this.#page - 2 > 1 ? this.#page - 2 : 1;\n    this.#listLastPage = this.#page + 2 < this.#totalPages ? this.#page + 2 : this.#totalPages;\n    this.handleButtonsAndDots();\n    this.createList();\n  };\n  handleButtonsAndDots = () => {\n    const buttons = [...this.getButtonsRef()];\n\n    if (this.#listFirstPage <= 1) {\n      this.hideElement(buttons[0]);\n    } else {\n      this.showElement(buttons[0]);\n    }\n\n    if (this.#listFirstPage < 3) {\n      this.hideElement(this.refs.dots[0]);\n    } else {\n      this.showElement(this.refs.dots[0]);\n    }\n\n    if (this.#listLastPage >= this.#totalPages) {\n      this.hideElement(buttons.at(-1));\n    } else {\n      this.showElement(buttons.at(-1));\n    }\n\n    if (this.#listLastPage > this.#totalPages - 2) {\n      this.hideElement(this.refs.dots[1]);\n    } else {\n      this.showElement(this.refs.dots[1]);\n    }\n\n    if (this.#page === 1) {\n      this.refs.prev.disabled = true;\n    } else {\n      this.refs.prev.disabled = false;\n    }\n    if (this.#page === this.#totalPages) {\n      this.refs.next.disabled = true;\n    } else {\n      this.refs.next.disabled = false;\n    }\n  };\n  hideElement = ref => {\n    ref.classList.add('is-hidden');\n  };\n  showElement = ref => {\n    ref.classList.remove('is-hidden');\n  };\n  hidePagination = () => {\n    this.hideElement(this.refs.pagination);\n  };\n  showPagination = () => {\n    this.showElement(this.refs.pagination);\n  };\n  getTargetPage = target => {\n    const buttons = [...this.getButtonsRef()];\n    const index = buttons.findIndex(e => e === target);\n    if (index === 0) return 1;\n    if (index === buttons.length - 1) return this.#totalPages;\n    return index - 1 + this.#listFirstPage;\n  };\n  getButtonsRef = () => {\n    return document.querySelectorAll('[data-btn=\"page\"]');\n  };\n  createList = () => {\n    this.refs.container.innerHTML = '';\n    let markup = '';\n    let firstPage = this.#listFirstPage < 1 ? 1 : this.#listFirstPage;\n    let lastPage = this.#listLastPage > this.#totalPages ? this.#totalPages : this.#listLastPage;\n    for (let i = firstPage; i <= lastPage; i += 1) {\n      markup += this.createLinkMarkup(i);\n    }\n    this.refs.container.insertAdjacentHTML('beforeend', markup);\n  };\n  createLinkMarkup = num => {\n    const active = num === this.#page ? 'pagination__button--active' : '';\n    return `<span class=\"pagination__button ${active}\" data-btn=\"page\">${num}</span>`;\n  };\n  get page() {\n    return this.#page;\n  }\n  set page(newPage) {\n    this.#page = newPage;\n  }\n  get totalPages() {\n    return this.#totalPages;\n  }\n  set totalPages(newTotalPages) {\n    this.#totalPages = newTotalPages;\n    [...this.getButtonsRef()].at(-1).textContent = this.#totalPages;\n    this.goToPage(this.#page);\n  }\n  get callback() {\n    return this.#callback;\n  }\n  set callback(newCallback) {\n    this.#callback = newCallback;\n  }\n}\n","/**\n * Задать кнопке открытия модального окна аттрибут data-modal-open=\"[name]\"\n * * Задать второй кнопке открытия модального окна data-modal-open=\"[name]-second\"\n * * Задать backdrop модального окна аттрибуты data-modal=\"[name]\", class=\"is-hidden\"\n * * Задать кнопке закрытия модального окна аттрибут data-modal-close=\"[name]\"\n * * Модальное окно закрывается по клику на кнопку закрытия, по клику в бэкдроп,\n * по нажатию клавиши \"Esc\"\n */\nclass Modal {\n  constructor(name) {\n    this.refs = {\n      modal: document.querySelector(`[data-modal=\"${name}\"]`),\n      openBtn: document.querySelector(`[data-modal-open=\"${name}\"]`),\n      openBtnSecond: document.querySelector(`[data-modal-open=\"${name}-second\"]`),\n      closeBtn: document.querySelector(`[data-modal-close=\"${name}\"]`),\n    };\n    this.refs.openBtn.addEventListener('click', this.onModalOpenBtnClick);\n    this.refs.openBtnSecond?.addEventListener('click', this.onModalOpenBtnClick);\n  }\n  onModalOpenBtnClick = () => {\n    this.openModal();\n    this.refs.closeBtn.addEventListener('click', this.closeModal);\n    this.refs.modal.addEventListener('click', this.onBackdropClick);\n    document.addEventListener('keydown', this.onEscDown);\n  };\n  openModal = () => {\n    this.refs.modal.classList.remove('is-hidden');\n    document.body.classList.add('modal-open');\n  };\n  closeModal = () => {\n    this.refs.modal.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n    this.refs.closeBtn.removeEventListener('click', this.closeModal);\n    this.refs.modal.removeEventListener('click', this.onBackdropClick);\n    document.removeEventListener('keydown', this.onEscDown);\n  };\n  onBackdropClick = e => {\n    if (e.target !== this.refs.modal) return;\n    this.closeModal();\n  };\n  onEscDown = e => {\n    if (e.code !== 'Escape') return;\n    this.closeModal();\n  };\n}\nexport { Modal };\n","import { genresStorage } from '../services';\n\nfunction getGenresNames(genresIds) {\n  const genres = genresStorage.get();\n  const genresNames = genresIds.map(id => {\n    const { name } = genres.find(item => item.id === id);\n    return name;\n  });\n  return genresNames;\n}\nexport { getGenresNames };\n","import ApiTMDB from './apiTMDB';\nimport Storage from './storage';\nimport Pagination from './pagination';\n\nconst api = new ApiTMDB();\nconst genresStorage = new Storage(Storage.KEYS.GENRES);\nconst moviesStorage = new Storage(Storage.KEYS.MOVIES);\nconst queuedStorage = new Storage(Storage.KEYS.QUEUED);\nconst watchedStorage = new Storage(Storage.KEYS.WATCHED);\nconst themeStorage = new Storage(Storage.KEYS.THEME);\nconst pagination = new Pagination({});\nconst VIEWS = {\n  HOME: 'home',\n  SEARCH: 'search',\n  CURRENT: '',\n};\n\nexport { Modal } from './modal';\nexport { getGenresNames } from './getGenresNames';\nexport {\n  api,\n  genresStorage,\n  moviesStorage,\n  queuedStorage,\n  watchedStorage,\n  themeStorage,\n  pagination,\n  ApiTMDB,\n  VIEWS,\n};\n","import { api, genresStorage } from './services';\nasync function genres() {\n  try {\n    const genres = await api.getGenres();\n    genresStorage.save(genres);\n  } catch (error) {\n    console.error(error);\n  }\n}\nexport default genres;\n","import { themeStorage } from './services';\nconst refs = {\n  root: document.querySelector(':root'),\n  button: document.querySelector('.theme'),\n  light: document.querySelector('[data-theme=\"light\"]'),\n  dark: document.querySelector('[data-theme=\"dark\"]'),\n};\nconst THEME = {\n  SCHEME: 'color-scheme',\n  LIGHT: 'light',\n  DARK: 'dark',\n};\n\nfunction loadTheme(theme) {\n  if (theme === THEME.LIGHT) {\n    refs.light.classList.add('active');\n    refs.dark.classList.remove('active');\n  } else {\n    refs.dark.classList.add('active');\n    refs.light.classList.remove('active');\n  }\n  refs.root.setAttribute(THEME.SCHEME, theme);\n}\n\nfunction getCurrentTheme() {\n  const systemTheme = window.matchMedia(`(prefers-${THEME.SCHEME}: ${THEME.LIGHT})`).matches\n    ? THEME.LIGHT\n    : THEME.DARK;\n  const savedTheme = themeStorage.get();\n  return savedTheme ? savedTheme : systemTheme;\n}\n\nfunction handleClick() {\n  const currentTheme = getCurrentTheme();\n  const newTheme = currentTheme === THEME.LIGHT ? THEME.DARK : THEME.LIGHT;\n  themeStorage.save(newTheme);\n  loadTheme(newTheme);\n}\n\nfunction getInitialTheme() {\n  const theme = getCurrentTheme();\n  loadTheme(theme);\n}\n\nexport default function handleTheme() {\n  refs.button.addEventListener('click', handleClick);\n  window.addEventListener('DOMContentLoaded', getInitialTheme);\n}\n","import { getGenresNames } from '../services';\nimport notFoundImg from '../../images/film_card/poster-img.jpg';\nimport notFoundImgRetina from '../../images/film_card/poster-img@2x.jpg';\nconst movieListRef = document.querySelector('.gallery');\n\nconst makeMoviesMarkup = movies =>\n  movies\n    .map(\n      ({\n        title,\n        release_date,\n        first_air_date,\n        poster_path,\n        id,\n        genre_ids: genresIds,\n        genres,\n        vote_average,\n      }) => {\n        const genresNames = genresIds ? getGenresNames(genresIds) : genres.map(({ name }) => name);\n        const year = new Date(release_date || first_air_date).getFullYear() || '';\n        const poster2x = poster_path\n          ? `https://image.tmdb.org/t/p/w500${poster_path}`\n          : notFoundImgRetina;\n        const poster = poster_path ? `https://image.tmdb.org/t/p/w300${poster_path}` : notFoundImg;\n        let rating = 'N/A';\n        if (vote_average) {\n          rating = vote_average === 10 ? '10.0' : String(vote_average).padEnd(3, '.0');\n        }\n        return `\n      <li class=\"card-item\" data-id=\"${id}\">\n        <picture>\n          <source\n          srcset=\"\n          ${poster} 1x,\n          ${poster2x} 2x,\n          \" \n        />\n        <img class=\"movie-img\"\n        src=\"${poster}\"\n        alt=\"${title}\"\n        width=\"280\"\n        height=\"398\"\n        />\n        </picture>\n        <div class = \"movie-card\">\n        <h5 class=\"movie-title\">${title}</h5>\n        <div class=\"container_movie-info\">\n        <p class=\"movie-info\">${genresNames.join(', ') || 'No genres found'} | ${year}</p>\n        <p class=\"movie-rating\">${rating}</p>\n        </div>\n        </div>\n        </li>\n        `;\n      },\n    )\n    .join('');\n\nconst renderMarkup = movies => {\n  const markup = makeMoviesMarkup(movies);\n  movieListRef.insertAdjacentHTML('beforeend', markup);\n};\n\nexport { renderMarkup };\n","import { renderMarkup } from './templates/film_card';\nimport { api, pagination, ApiTMDB, VIEWS } from './services';\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  categories: document.querySelector('.gallery-categories'),\n  loader: document.querySelector('.loader'),\n  defaultBtn: document.querySelector('[data-endpoint=\"TRENDING\"]'),\n};\n\nrefs.categories.addEventListener('click', onChangeCategory);\n\nfunction onChangeCategory(e) {\n  if (e.target === e.currentTarget) {\n    return;\n  }\n\n  const newEndpoint = e.target.dataset.endpoint;\n  if (ApiTMDB.ENDPOINTS[newEndpoint]) {\n    api.endpoint = ApiTMDB.ENDPOINTS[newEndpoint];\n  }\n  resetPage();\n  movies();\n  toggleActiveBtn(e.target);\n}\n\nfunction resetPage() {\n  api.resetPage();\n  refs.gallery.innerHTML = '';\n}\nfunction toggleActiveBtn(target) {\n  const activeBtn = refs.categories.querySelector('.btn--on');\n  activeBtn?.classList.replace('btn--on', 'btn--off');\n  target.classList.replace('btn--off', 'btn--on');\n}\n\nasync function movies(page) {\n  VIEWS.CURRENT = VIEWS.HOME;\n  if (page) {\n    api.page = page;\n    api.endpoint = ApiTMDB.ENDPOINTS.TRENDING;\n    toggleActiveBtn(refs.defaultBtn);\n  }\n  try {\n    const totalPages = await renderMovies();\n    pagination.page = api.page;\n    pagination.totalPages = totalPages;\n    pagination.callback = moreMovies;\n    pagination.showPagination();\n  } catch (error) {\n    console.log(error.message);\n    refs.loader.classList.add('is-hidden');\n  }\n}\n\nasync function renderMovies() {\n  refs.loader.classList.remove('is-hidden');\n  const { results, total_pages: totalPages } = await api.getCategory();\n  refs.gallery.innerHTML = ' ';\n  refs.categories.classList.remove('is-hidden');\n  renderMarkup(results);\n  refs.loader.classList.add('is-hidden');\n  return totalPages;\n}\n\nasync function moreMovies(page) {\n  try {\n    api.page = page;\n    await renderMovies();\n    refs.gallery.scrollIntoView();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default movies;\n","import { renderMarkup } from './templates/film_card';\nimport { api, pagination, moviesStorage, VIEWS } from './services';\n\nconst submitForm = document.querySelector('.search__form');\nconst info = document.querySelector('.gallery-info');\nconst gallery = document.querySelector('.gallery');\nconst categories = document.querySelector('.gallery-categories');\nconst loader = document.querySelector('.loader');\nconst ERROR_MESSAGE = 'Search is not successful. Enter the correct movie name.';\nlet canScroll = false;\n\nconst handleSearch = async page => {\n  VIEWS.CURRENT = VIEWS.SEARCH;\n  if (page) {\n    api.page = page;\n  } else {\n    canScroll = false;\n  }\n  loader.classList.remove('is-hidden');\n  categories.classList.add('is-hidden');\n  try {\n    const data = await api.searchMovies();\n    if (!data.results.length) {\n      handleError();\n      return;\n    }\n    handleSuccess(data);\n    if (canScroll) gallery.scrollIntoView();\n  } catch (error) {\n    handleError(error);\n  }\n};\n\nconst handleSuccess = ({ results, total_pages: totalPages }) => {\n  info.innerHTML = '';\n  gallery.innerHTML = '';\n  renderMarkup(results);\n  moviesStorage.save(results);\n  pagination.callback = handleSearch;\n  pagination.page = api.page;\n  pagination.totalPages = totalPages;\n  loader.classList.add('is-hidden');\n  pagination.showPagination();\n};\nconst handleError = err => {\n  gallery.innerHTML = '';\n  pagination.hidePagination();\n  loader.classList.add('is-hidden');\n  info.innerHTML = ERROR_MESSAGE;\n  VIEWS.CURRENT = VIEWS.HOME;\n  if (err) {\n    console.error(err);\n  }\n};\nconst searchFilms = async e => {\n  e.preventDefault();\n  canScroll = false;\n  const query = e.target.elements.search.value.trim();\n  if (!query) {\n    return;\n  }\n  api.query = query;\n  await handleSearch(1);\n  canScroll = true;\n  e.target.reset();\n};\nconst search = () => {\n  submitForm.addEventListener('submit', searchFilms);\n};\nexport { handleSearch, search };\n","// Функция создающая разметку для одного фильма\nimport notFoundImg from '../../images/film_card/poster-img.jpg';\nimport notFoundImgBig from '../../images/film_card/poster-big.jpg';\nimport notFoundImgRetina from '../../images/film_card/poster-big@2x.jpg';\nimport notFoundImgBigRetina from '../../images/film_card/poster-img@2x.jpg';\n\nexport default function makeOneMovieMarkup(dataMovie) {\n  const {\n    title,\n    poster_path,\n    genres,\n    vote_average,\n    vote_count,\n    original_title,\n    overview,\n    popularity,\n    watched,\n    queued,\n    videos,\n  } = dataMovie;\n  const genresNames = genres.map(genre => genre.name).join(', ');\n  const poster = poster_path ? `https://image.tmdb.org/t/p/w342${poster_path}` : notFoundImg;\n  const poster2x = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : notFoundImgRetina;\n  const posterBig = poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : notFoundImgBig;\n  const posterBig2x = poster_path\n    ? `https://image.tmdb.org/t/p/w780${poster_path}`\n    : notFoundImgBigRetina;\n  let trailer = videos.results.find(\n    video => video['iso_639_1'] === 'en' && video.type === 'Trailer',\n  );\n  trailer = trailer ? trailer : videos.results[0];\n  const trailerKey = trailer?.key;\n  let rating = 'N/A';\n  if (vote_average) {\n    rating = vote_average === 10 ? '10.0' : String(vote_average).padEnd(3, '.0');\n  }\n  return `<div class=\"modal__content\">\n        <div class=\"poster__wrapper\">\n            <picture>\n                <source\n                  srcset=\"\n                    ${poster} 1x,\n                    ${poster2x} 2x\n                  \"\n                  media=\"(max-width:1023px)\"\n                />\n                <source\n                  srcset=\"\n                    ${posterBig} 1x,\n                    ${posterBig2x} 2x\n                  \"\n                  media=\"(min-width:1024px)\"\n                />\n                <img class=\"poster__img\" alt=\"${title}\" src=\"${poster}\" loading=\"lazy\" />\n              </picture>\n        </div>\n        <div class=\"movie\">\n            <h2 class=\"movie__title uppercase\">${title}</h2>\n\n            <table class=\"movie__statistic\">\n        <tr class=\"movie__table--row\">\n          <td class=\"movie__table--head\">Vote &#47 Votes</td>\n          <td class=\"movie__table--data\"><span class=\"movie__average\">${rating}</span>&nbsp &#47 &nbsp<span class=\"movie__count\">${vote_count}</td>\n        </tr>\n        <tr class=\"movie__table--row\">\n          <td class=\"movie__table--head\">Popularity</th>\n          <td class=\"movie__table--data\">${popularity}</td>\n        </tr>\n        <tr class=\"movie__table--row\">\n          <td class=\"movie__table--head\">${title ? '' : 'Original'} Title</th>\n          <td class=\"movie__table--data\">${title ? title : original_title}</td>\n        </tr>\n        <tr class=\"movie__table--row\">\n          <td class=\"movie__table--head\">Genre</th>\n          <td class=\"movie__table--data\">${genresNames ? genresNames : 'No genres found'}</td>\n        </tr>\n      </table>\n\n            <div class=\"movie__description\">\n                <h3 class=\"movie__about uppercase\">About</h3>\n                <p class=\"movie__text\">${overview}</p>\n            </div>\n            <div class=\"movie__btn buttons__container\">\n                    <button type=\"button\" class=\"btn--modal ${watched ? 'btn-modal--off' : 'btn--on'}\" data-btn=\"watched\">${\n                      \n                      watched ? 'Remove from' : 'Add to'\n                    } watched</button>\n                    <button type=\"button\" class=\"btn--modal ${queued ? 'btn-modal--off' : 'btn--on'}\" data-btn=\"queue\">${\n                      queued ? 'Remove from' : 'Add to'\n                    } queue</button>\n                    ${\n                      trailerKey\n                        ? `<button type=\"button\" class=\"btn--trailer btn--on\" data-btn=\"trailer\">Show trailer</button>`\n                        : ''\n                    }\n            </div>\n        </div>\n    </div>\n    ${\n      trailerKey\n        ? `<div class=\"trailer is-hidden\">\n      <iframe\n      class=\"trailer__iframe\"\n      width=\"240\"\n      height=\"135\"\n      src=\"https://www.youtube.com/embed/${trailerKey}\"\n      title=\"${trailer.type}\"\n      frameborder=\"0\"\n      allow=\"accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope; picture-in-picture\"\n      allowfullscreen>\n      </iframe>\n    </div>`\n        : '<div></div>'\n    }\n    `;\n}\n\n","import { watchedStorage, queuedStorage, pagination, VIEWS } from './services';\nimport { renderMarkup } from './templates/film_card';\nimport movies from './movies';\nimport { handleSearch } from './searchFilms';\n\nconst MARKER = {\n  WATCHED: 'watched',\n  QUEUE: 'queue',\n};\nconst PER_PAGE = 18;\nlet page = 1;\nlet canScroll = false;\nconst refs = {\n  logo: document.querySelector('.header__logo-link'),\n  myLib: document.querySelector('[data-nav=\"myLibrary\"]'),\n  home: document.querySelector('[data-nav=\"home\"]'),\n  watchedBtn: document.querySelector('[data-btn=\"watched\"]'),\n  queueBtn: document.querySelector('[data-btn=\"queue\"]'),\n  libBtnsContainer: document.querySelector('.buttons__container--header'),\n  searchForm: document.querySelector('.search__form'),\n  info: document.querySelector('.gallery-info'),\n  gallery: document.querySelector('.gallery'),\n  categories: document.querySelector('.gallery-categories'),\n  header: document.querySelector('.header'),\n};\n\nfunction onClickMyLibBtn() {\n  if (refs.myLib.classList.contains('current')) {\n    return;\n  }\n  changeLibClass('current');\n  changeClassBtn('btn--on', 'btn--off');\n  refs.libBtnsContainer.classList.remove('is-hidden');\n  refs.searchForm.classList.add('is-hidden');\n  refs.header.classList.add('myLib');\n  page = 1;\n  refs.categories.classList.add('is-hidden');\n  canScroll = false;\n  renderWatched();\n  canScroll = true;\n}\n\nfunction addMarker(marker) {\n  refs.gallery.classList.add(marker);\n}\nfunction removeMarker(marker) {\n  refs.gallery.classList.remove(marker);\n}\n\nfunction renderWatched(newPage) {\n  refs.gallery.innerHTML = '';\n  const watched = watchedStorage.get() || [];\n  removeMarker(MARKER.QUEUE);\n  addMarker(MARKER.WATCHED);\n  pagination.callback = renderWatched;\n  const watchedPage = preparePage(watched, newPage);\n  renderLibrary(watchedPage);\n}\n\nfunction renderQueue(newPage = 1) {\n  refs.gallery.innerHTML = '';\n  const queue = queuedStorage.get() || [];\n  removeMarker(MARKER.WATCHED);\n  addMarker(MARKER.QUEUE);\n  pagination.callback = renderQueue;\n  const queuePage = preparePage(queue, newPage);\n  renderLibrary(queuePage);\n}\n\nfunction preparePage(data, newPage) {\n  page = newPage ? newPage : page;\n  const totalPages = Math.ceil(data.length / PER_PAGE);\n  page = page > totalPages ? totalPages : page;\n  pagination.page = page;\n  pagination.totalPages = totalPages;\n  const skip = (page - 1) * PER_PAGE;\n  return data.slice(skip, PER_PAGE * page);\n}\n\nfunction renderLibrary(movies) {\n  if (!movies || movies.length === 0) {\n    refs.info.innerHTML = 'Please add something to library';\n    pagination.hidePagination();\n    return;\n  }\n  refs.info.innerHTML = '';\n  renderMarkup(movies);\n  pagination.showPagination();\n  if (canScroll) {\n    refs.gallery.scrollIntoView();\n  }\n}\n\nfunction onClickMyHomeBtn(e) {\n  const target = e.currentTarget;\n  if (target.classList.contains('current')) {\n    return;\n  }\n  removeMarker(MARKER.WATCHED);\n  removeMarker(MARKER.QUEUE);\n  if (!refs.home.classList.contains('current')) changeLibClass('current');\n  refs.libBtnsContainer.classList.add('is-hidden');\n  refs.searchForm.classList.remove('is-hidden');\n  refs.searchForm.elements.search.value = '';\n  refs.header.classList.remove('myLib');\n  refs.info.innerHTML = '';\n  refs.categories.classList.remove('is-hidden');\n  if (target === refs.home) {\n    goBack();\n    return;\n  }\n  movies(1);\n}\n\nfunction goBack() {\n  switch (VIEWS.CURRENT) {\n    case VIEWS.HOME:\n      movies();\n      return;\n    case VIEWS.SEARCH:\n      handleSearch();\n      return;\n    default:\n      return;\n  }\n}\n\nfunction onClickMyWatchedBtn() {\n  changeClassBtn('btn--on', 'btn--off');\n  page = 1;\n  canScroll = false;\n  renderWatched();\n  canScroll = true;\n}\n\nfunction onClickMyQueueBtn() {\n  changeClassBtn('btn--off', 'btn--on');\n  page = 1;\n  canScroll = false;\n  renderQueue();\n  canScroll = true;\n}\n\nfunction changeClassBtn(add, remove) {\n  refs.watchedBtn.classList.add(add);\n  refs.watchedBtn.classList.remove(remove);\n  refs.queueBtn.classList.add(remove);\n  refs.queueBtn.classList.remove(add);\n}\n\nfunction changeLibClass(className) {\n  refs.myLib.classList.toggle(className);\n  refs.home.classList.toggle(className);\n}\n\nfunction myLibrary() {\n  refs.logo.addEventListener('click', onClickMyHomeBtn);\n  refs.myLib.addEventListener('click', onClickMyLibBtn);\n  refs.home.addEventListener('click', onClickMyHomeBtn);\n  refs.watchedBtn.addEventListener('click', onClickMyWatchedBtn);\n  refs.queueBtn.addEventListener('click', onClickMyQueueBtn);\n}\n\nexport { MARKER, myLibrary, renderWatched, renderQueue };\n","import { api, watchedStorage, queuedStorage } from './services';\nimport makeOneMovieMarkup from './templates/film-modal';\nimport { MARKER, renderWatched, renderQueue } from './my_library';\n\nconst BTNS = {\n  QUEUE: 'queue',\n  WATCHED: 'watched',\n  TRAILER: 'trailer',\n  ADD: 'Add to',\n  REMOVE: 'Remove from',\n  SHOW: 'Show',\n  HIDE: 'Hide',\n  ON: 'btn--on',\n  OFF: 'btn-modal--off',\n};\n// получаем ссылку на бэкдроп\nconst backdropRef = document.querySelector(`[data-modal=\"movie-one\"]`);\n// получаем ссылку на модалку\nconst modalRef = document.querySelector(`.modal`);\n// получаем ссылку на галерею в которую рендерятся карточки фильмов\nconst movieListRef = document.querySelector('.gallery');\n// получаем ссылку на кнопку закрытия модалки\nconst closeBtnRef = document.querySelector(`[data-modal-close=\"movie-one\"]`);\nconst wrapperModalRef = document.querySelector('.wrapper-modal');\nconst loader = document.querySelector('.loader');\n\n\nlet dataMovie = {};\nlet watched = false;\nlet queued = false;\nlet trailerShown = false;\n\n\n// Функция для очищения разметки в модальном окне\nfunction clearModal() {\n  wrapperModalRef.innerHTML = '';\n}\n\n// Функция для сообщения пользователю об ошибке\nconst handleError = error => {\n  loader.classList.add('is-hidden');\n  console.log(error.message);\n};\n\n// Функция для модального окна\nasync function onModalOpenClick(event) {\n  const cardRef = event.target.closest('.card-item');\n  if (event.target === event.currentTarget || !cardRef) {\n    return;\n  }\n  const id = Number(cardRef.dataset.id);\n  loader.classList.remove('is-hidden');\n  watched = watchedStorage.checkMovie(id);\n  queued = queuedStorage.checkMovie(id);\n  api.id = id;\n  try {\n    dataMovie = await api.getMovie();\n\n    wrapperModalRef.insertAdjacentHTML(\n      'beforeend',\n      makeOneMovieMarkup({ ...dataMovie, watched, queued }),\n    );\n\n    openModal();\n    loader.classList.add('is-hidden');\n    closeBtnRef.addEventListener('click', closeModal);\n    backdropRef.addEventListener('click', onBackdropClick);\n    document.addEventListener('keydown', onEscDown);\n    wrapperModalRef.querySelector('.buttons__container').addEventListener('click', onModalButton);\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nfunction openModal() {\n  backdropRef.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n}\n\nfunction closeModal() {\n  backdropRef.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n  closeBtnRef.removeEventListener('click', onBtnClick);\n  backdropRef.removeEventListener('click', onBackdropClick);\n  document.removeEventListener('keydown', onEscDown);\n  wrapperModalRef.querySelector('.buttons__container').removeEventListener('click', onModalButton);\n  clearModal();\n}\nfunction onBackdropClick(e) {\n  if (e.target !== backdropRef) return;\n  closeModal();\n}\nfunction onEscDown(e) {\n  if (e.code !== 'Escape') return;\n  closeModal();\n}\nfunction onBtnClick(e) {\n  if (e.code !== closeBtnRef) return;\n  closeModal();\n}\nfunction onModalButton({ target }) {\n  const btn = target.dataset.btn;\n  if (!btn) return;\n  switch (btn) {\n    case BTNS.WATCHED:\n      if (watched) {\n        watchedStorage.deleteMovie(dataMovie.id);\n      } else {\n        watchedStorage.saveMovie(dataMovie);\n      }\n      watched = !watched;\n      toggleBtnClass(target)\n      changeBtnTextWatched(target);\n      if (movieListRef.classList.contains(MARKER.WATCHED)) {\n        renderWatched();\n      }\n      return;\n    case BTNS.QUEUE:\n      if (queued) {\n        queuedStorage.deleteMovie(dataMovie.id);\n      } else {\n        queuedStorage.saveMovie(dataMovie);\n      }\n      queued = !queued;\n      toggleBtnClass(target)\n      changeBtnTextQueue(target);\n      if (movieListRef.classList.contains(MARKER.QUEUE)) {\n        renderQueue();\n      }\n      return;\n    case BTNS.TRAILER:\n      const trailerRef = document.querySelector('.trailer');\n      if (trailerShown) {\n        modalRef.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        });\n        setTimeout(() => trailerRef.classList.add('is-hidden'), 250);\n      } else {\n        trailerRef.classList.remove('is-hidden');\n        setTimeout(\n          () =>\n            modalRef.scrollTo({\n              top: 500,\n              behavior: 'smooth',\n            }),\n          250,\n        );\n      }\n      trailerShown = !trailerShown;\n      toggleBtnClass(target)\n      changeBtnTextTrailer(target);\n      return;\n    default:\n      return;\n  }\n}\n\nfunction changeBtnTextWatched(btn) {\n  btn.textContent = `${watched ? BTNS.REMOVE : BTNS.ADD} ${BTNS.WATCHED}`;\n}\n\nfunction changeBtnTextQueue(btn) {\n  btn.textContent = `${queued ? BTNS.REMOVE : BTNS.ADD} ${BTNS.QUEUE}`;\n}\n\nfunction changeBtnTextTrailer(btn) {\n  btn.textContent = `${trailerShown ? BTNS.HIDE : BTNS.SHOW} ${BTNS.TRAILER}`;\n}\n\nfunction onModalCard() {\n  // вешаем слушателя на общего родителя галерею\n  movieListRef.addEventListener('click', onModalOpenClick);\n}\n\nfunction toggleBtnClass(btn){\nbtn.classList.toggle(BTNS.ON)\nbtn.classList.toggle(BTNS.OFF)\n}\n\nexport default onModalCard;\n","import sprite from '../images/sprite.svg';\n\nconst refs = {\n  header: document.querySelector('.header'),\n  footer: document.querySelector('.footer'),\n};\n\nconst BTN = {\n  UP: 'up',\n  DOWN: 'down',\n  CLASS: 'btn-up',\n  HIDDEN: 'is-hidden',\n};\n\nconst observer = new IntersectionObserver(handleObserve, { threshold: 0 });\n\nfunction createBtn(direction) {\n  const btn = document.createElement('button');\n  const data = direction === BTN.UP ? BTN.UP : BTN.DOWN;\n  btn.setAttribute('data-direction', data);\n  btn.setAttribute('aria-label', `Scroll page ${direction}`);\n  btn.classList.add(`${BTN.CLASS}__btn`, BTN.HIDDEN);\n  btn.innerHTML = `\n    <svg class=\"${BTN.CLASS}__svg\" width=\"32\" height=\"32\">\n      <use href=\"${sprite}#icon-circle-${direction}\"></use>\n    </svg>\n  `;\n  return btn;\n}\n\nfunction renderBtns() {\n  refs.upBtn = createBtn(BTN.UP);\n  refs.downBtn = createBtn(BTN.DOWN);\n  const container = document.createElement('div');\n  container.classList.add(BTN.CLASS);\n  container.appendChild(refs.upBtn);\n  container.appendChild(refs.downBtn);\n  document.querySelector('main').appendChild(container);\n  container.addEventListener('click', handleClick);\n}\n\nfunction handleClick(e) {\n  const target = e.target.dataset.direction ? e.target : e.target.closest('BUTTON');\n  const direction = target?.dataset.direction;\n  switch (direction) {\n    case BTN.UP:\n      refs.header.scrollIntoView();\n      return;\n    case BTN.DOWN:\n      refs.footer.scrollIntoView();\n      return;\n    default:\n      return;\n  }\n}\n\nfunction hideBtn(target) {\n  if (target === refs.header) {\n    refs.upBtn.classList.add(BTN.HIDDEN);\n  } else {\n    refs.downBtn.classList.add(BTN.HIDDEN);\n  }\n}\nfunction showBtn(target) {\n  if (target === refs.header) {\n    refs.upBtn.classList.remove(BTN.HIDDEN);\n  } else {\n    refs.downBtn.classList.remove(BTN.HIDDEN);\n  }\n}\n\nfunction handleObserve(entries) {\n  entries.forEach(({ isIntersecting, target }) => {\n    if (isIntersecting) {\n      hideBtn(target);\n    } else {\n      showBtn(target);\n    }\n  });\n}\n\nfunction addUpBtn() {\n  renderBtns();\n  observer.observe(refs.header);\n  observer.observe(refs.footer);\n}\n\nexport default addUpBtn;\n","import genres from './genres';\nimport handleTheme from './theme';\nimport movies from './movies';\nimport { search } from './searchFilms';\nimport filmModal from './film-modal';\nimport { myLibrary } from './my_library';\nimport addUpBtn from './up-btn';\nimport { Modal } from './services/modal';\n\nexport default async function app() {\n  handleTheme();\n  await genres();\n  await movies();\n  search();\n  filmModal();\n  myLibrary();\n  addUpBtn();\n  new Modal('team');\n}\n","import './sass/main.scss';\nimport app from './js/app';\napp();\n"]}